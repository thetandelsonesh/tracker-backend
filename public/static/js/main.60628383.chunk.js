(this["webpackJsonptracker-frontend"]=this["webpackJsonptracker-frontend"]||[]).push([[0],{174:function(e,t,c){},177:function(e,t,c){},267:function(e,t,c){},268:function(e,t,c){},269:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(28),i=c.n(a),r=c(65),l=c(89),s=c(153),o=c(19),d={list:[],loading:!0,error:null},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VEHICLE_LIST_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{list:t.payload.list,error:null,loading:!1});case"GET_VEHICLE_LIST_FAILED":return Object(o.a)(Object(o.a)({},e),{},{error:t.err,loading:!1});default:return e}},j={list:[],places:[],loading:!1,error:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLACE_INTERACTION_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{list:t.payload.list,total:t.payload.total,error:null,loading:!1});case"GET_PLACE_LIST_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{places:t.payload.list});case"GET_PLACE_INTERACTION_PROGRESS":return Object(o.a)(Object(o.a)({},e),{},{error:null,loading:!0});case"GET_PLACE_INTERACTION_FAILED":return Object(o.a)(Object(o.a)({},e),{},{error:t.err,loading:!1});default:return e}},b={list:[],vehicles:[],loading:!1,error:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VEHICLE_ACTIVITY_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{list:t.payload.list,error:null,loading:!1});case"GET_VEHICLE_ACTIVITY_RESET":return Object(o.a)(Object(o.a)({},e),{},{list:[],error:null,loading:!1});case"GET_VEHICLE_LIST_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{vehicles:t.payload.list});case"GET_VEHICLE_ACTIVITY_PROGRESS":return Object(o.a)(Object(o.a)({},e),{},{error:null,list:[],loading:!0});case"GET_VEHICLE_ACTIVITY_FAILED":return Object(o.a)(Object(o.a)({},e),{},{error:t.err,loading:!1});default:return e}},p=Object(l.b)({vehicle:u,vehicleActivity:v,place:h}),O=Object(l.c)(p,{},Object(l.a)(s.a)),f=c(71),E=c(26),g=c(273),m={home:"/",placeInteraction:"/place-interaction",vehicleActivity:"/vehicle-activity",vehicleList:"/vehicle-list"},I=(c(174),c(9)),x=function(){return Object(I.jsx)("div",{className:"home",children:Object(I.jsxs)("div",{className:"menu-selection",children:[Object(I.jsx)("h1",{children:"Vehicle Tracker Menu"}),Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:Object(I.jsx)(f.b,{to:m.vehicleList,children:Object(I.jsx)(g.a,{children:"Vehicles"})})}),Object(I.jsx)("li",{children:Object(I.jsx)(f.b,{to:m.placeInteraction,children:Object(I.jsx)(g.a,{children:"Place Interactions"})})}),Object(I.jsx)("li",{children:Object(I.jsx)(f.b,{to:m.vehicleActivity,children:Object(I.jsx)(g.a,{children:"Vehicle Activity"})})})]})]})})},y=c(133),T=c(54),_=c.n(T),C=c(272),S=c(162),L=c(94),A=c(274),V=c(58),w=c(271),k=(c(177),C.a.RangePicker),N=[{title:"Vehicle License",dataIndex:"vehicleLicense",key:"vehicleLicense",render:function(e,t){var c;return null===t||void 0===t||null===(c=t.vehicle)||void 0===c?void 0:c.license}},{title:"Vehicle Model",dataIndex:"vehicleModel",key:"vehicleModel",render:function(e,t){var c;return null===t||void 0===t||null===(c=t.vehicle)||void 0===c?void 0:c.model}},{title:"Coordinates",dataIndex:"location",key:"location",render:function(e,t){var c,n;return"".concat(null===t||void 0===t||null===(c=t.location)||void 0===c?void 0:c.coordinates[0],", ").concat(null===t||void 0===t||null===(n=t.location)||void 0===n?void 0:n.coordinates[1])}},{title:"Time",dataIndex:"trackedAt",key:"trackedAt",render:function(e){return _()(e).format("lll")}}],P=function(e){var t=e.list,c=e.places,a=e.total,i=e.error,r=e.loading,l=e.fetchPlaceList,s=e.fetchPlaceInteraction,d=Object(n.useState)({current:1,pageSize:50,total:50,showSizeChanger:!1}),u=Object(y.a)(d,2),j=u[0],h=u[1],b=Object(n.useState)({placeId:null,startDate:null,endDate:null}),v=Object(y.a)(b,2),p=v[0],O=v[1];Object(n.useEffect)((function(){l()}),[]),Object(n.useEffect)((function(){(null===i||void 0===i?void 0:i.code)&&S.b.error(i.msg)}),[null===i||void 0===i?void 0:i.code]),Object(n.useEffect)((function(){h(Object(o.a)(Object(o.a)({},j),{},{total:a}))}),[a]),Object(n.useEffect)((function(){p.placeId&&p.startDate&&p.endDate&&f(j)}),[p]);var f=function(e){var t=Object(o.a)(Object(o.a)({},p),{},{page:e.current});s(t),h(e)},E=c.map((function(e){return Object(I.jsx)(L.a.Option,{value:e.id,children:e.name},e.id)}));return Object(I.jsxs)("div",{className:"page",children:[Object(I.jsx)("div",{className:"page-title",children:Object(I.jsx)("h1",{children:"Place Interactions"})}),Object(I.jsxs)("div",{className:"page-content",children:[Object(I.jsx)("div",{className:"content-search",children:Object(I.jsxs)(A.a,{name:"basic",layout:"inline",onFinish:function(e){var t=e.placeId,c=e.dateRange;O({placeId:t,startDate:c[0].unix(),endDate:c[1].unix()})},children:[Object(I.jsx)(A.a.Item,{name:"placeId",rules:[{required:!0,message:"Please select Place!"}],children:Object(I.jsx)(L.a,{size:"large",placeholder:"Select Place",allowClear:!0,children:E})}),Object(I.jsx)(A.a.Item,{name:"dateRange",rules:[{required:!0,message:"Please select date range!"}],children:Object(I.jsx)(k,{size:"large",showTime:!0})}),Object(I.jsx)(A.a.Item,{children:Object(I.jsx)(V.a,{type:"default",htmlType:"submit",size:"large",children:"Search"})})]})}),Object(I.jsx)("div",{className:"content-table",children:Object(I.jsx)(w.a,{rowKey:"id",columns:N,loading:r,dataSource:t,pagination:j,onChange:f,scroll:{y:"55vh"}})})]})]})},R=c(49),G=c.n(R),D=c(70),H=c(120),F=c.n(H);F.a.defaults.baseURL="http://ec2-13-126-173-22.ap-south-1.compute.amazonaws.com:5000/api/",F.a.interceptors.request.use((function(e){return e.headers["x-api-key"]="dc580f09-3fcb-4da4-8927-40924a329626",e.headers["Content-Type"]="application/json",e}),(function(e){return console.error("Interceptor : Error occured due to : ",e),Promise.reject(e)}));var z=function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(a,i){var r={method:e,url:t,config:n};"get"===e?r.params=c:r.data=c,F()(r).then((function(e){var t=e.data,c=t.error,n=t.payload,r=t.msg;c?i(c):a(Object(o.a)(Object(o.a)({},n),{},{msg:r}))})).catch((function(e){if(e.response){var t=e.response.data;i(t.error)}else i({code:"ERROR",msg:"We are under maintenance!"})}))}))},U=function(e){return z("get","/place/interaction",e)},M={fetchPlaceList:function(e){return function(){var e=Object(D.a)(G.a.mark((function e(t){var c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z("get","/place");case 3:c=e.sent,t({type:"GET_PLACE_LIST_SUCCESS",payload:c}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_PLACE_LIST_FAILED",err:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},fetchPlaceInteraction:function(e){return function(){var t=Object(D.a)(G.a.mark((function t(c){var n;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"GET_PLACE_INTERACTION_PROGRESS"}),t.prev=1,t.next=4,U(e);case 4:n=t.sent,c({type:"GET_PLACE_INTERACTION_SUCCESS",payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c({type:"GET_PLACE_INTERACTION_FAILED",err:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},Y=Object(r.b)((function(e){return Object(o.a)({},e.place)}),M)(P),q=(c(267),C.a.RangePicker),B=null,J=null,K=function(e){var t=e.vehicles,c=e.list,a=e.loading,i=e.error,r=e.fetchVehicleActivity,l=e.fetchVehicleList,s=e.vehicleActivityReset;Object(n.useEffect)((function(){return 0===t.length&&l(),o(),function(){return s()}}),[]),Object(n.useEffect)((function(){(null===i||void 0===i?void 0:i.code)&&S.b.error(i.msg)}),[null===i||void 0===i?void 0:i.code]),Object(n.useEffect)((function(){if(c.length){var e=c.filter((function(e){return!!e.location})).map((function(e){var t=e.location;return{lat:t.coordinates[1],lng:t.coordinates[0]}}));J.setPath(e),J.setMap(B),B.setCenter(new window.google.maps.LatLng(e[0].lat,e[0].lng))}}),[c]);var o=function(){B=new window.google.maps.Map(document.getElementById("map"),{zoom:10,center:{lat:15.2993,lng:74.124}}),(J=new window.google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(B)},d=t.map((function(e){return Object(I.jsx)(L.a.Option,{value:e.id,children:e.license},e.id)}));return Object(I.jsxs)("div",{className:"page vehicle-activity",children:[Object(I.jsx)("div",{className:"page-title",children:Object(I.jsx)("h1",{children:"Vehicle Activity"})}),Object(I.jsxs)("div",{className:"page-content",children:[Object(I.jsx)("div",{className:"content-search",children:Object(I.jsxs)(A.a,{name:"basic",layout:"inline",onFinish:function(e){var t=e.dateRange,c=e.vehicleId,n={startDate:t[0].unix(),endDate:t[1].unix(),vehicleId:c};r(n)},children:[Object(I.jsx)(A.a.Item,{name:"vehicleId",rules:[{required:!0,message:"Please select Vehicle!"}],children:Object(I.jsx)(L.a,{size:"large",placeholder:"Select Vehicle",allowClear:!0,children:d})}),Object(I.jsx)(A.a.Item,{name:"dateRange",rules:[{required:!0,message:"Please select date range!"}],children:Object(I.jsx)(q,{size:"large",showTime:!0})}),Object(I.jsx)(A.a.Item,{children:Object(I.jsx)(V.a,{loading:a,type:"default",htmlType:"submit",size:"large",children:"Show Vehicle Activity"})})]})}),Object(I.jsx)("div",{className:"content-map",id:"content-map",children:Object(I.jsx)("div",{id:"map"})})]})]})},W=function(e){return z("get","/vehicle/activity",e)},Q=function(){return function(){var e=Object(D.a)(G.a.mark((function e(t){var c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z("get","/vehicle",{});case 3:c=e.sent,t({type:"GET_VEHICLE_LIST_SUCCESS",payload:c}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_VEHICLE_LIST_FAILED",err:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},X={fetchVehicleActivity:function(e){return function(){var t=Object(D.a)(G.a.mark((function t(c){var n;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"GET_VEHICLE_ACTIVITY_PROGRESS"}),t.prev=1,t.next=4,W(e);case 4:n=t.sent,c({type:"GET_VEHICLE_ACTIVITY_SUCCESS",payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c({type:"GET_VEHICLE_ACTIVITY_FAILED",err:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},vehicleActivityReset:function(){return{type:"GET_VEHICLE_ACTIVITY_RESET"}},fetchVehicleList:Q},Z=Object(r.b)((function(e){return Object(o.a)({},e.vehicleActivity)}),X)(K),$=[{title:"Vehicle License",dataIndex:"license",key:"license"},{title:"Model",dataIndex:"model",key:"model"},{title:"Engine No",dataIndex:"engine",key:"engine"},{title:"Chassis No.",dataIndex:"chassis",key:"chassis"}],ee=function(e){var t=e.loading,c=e.list,a=e.error,i=e.fetchVehicleList;return Object(n.useEffect)((function(){i()}),[]),Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a.code)&&S.b.error(a.msg)}),[null===a||void 0===a?void 0:a.code]),Object(I.jsxs)("div",{className:"page",children:[Object(I.jsx)("div",{className:"page-title",children:Object(I.jsx)("h1",{children:"Vehicle List"})}),Object(I.jsx)("div",{className:"page-content",children:Object(I.jsx)("div",{className:"content-table",children:Object(I.jsx)(w.a,{rowKey:"id",columns:$,loading:t,dataSource:c,pagination:!1})})})]})},te={fetchVehicleList:Q},ce=Object(r.b)((function(e){return Object(o.a)({},e.vehicle)}),te)(ee),ne=c.p+"static/media/bg.d170641e.png",ae=c.p+"static/media/numadic.b0b90c58.svg",ie=function(){return Object(I.jsx)(f.a,{children:Object(I.jsxs)("main",{style:{backgroundImage:'url("'.concat(ne,'")')},children:[Object(I.jsx)(f.b,{to:m.home,children:Object(I.jsx)("img",{className:"logo",src:ae,alt:"tracker"})}),Object(I.jsxs)(E.c,{children:[Object(I.jsx)(E.a,{exact:!0,path:m.home,component:x}),Object(I.jsx)(E.a,{path:m.placeInteraction,component:Y}),Object(I.jsx)(E.a,{path:m.vehicleActivity,component:Z}),Object(I.jsx)(E.a,{path:m.vehicleList,component:ce})]})]})})};c(268);i.a.render(Object(I.jsx)(r.a,{store:O,children:Object(I.jsx)(ie,{})}),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.60628383.chunk.js.map